# Copyright Â© 2026 Intel Corporation. All rights reserved.
# SPDX-License-Identifier: Apache-2.0


services:
  aggregator-service:
    build:
      context: ./services/aggregator-service
      dockerfile: Dockerfile
    image: intel/hl-ai-aggregator-service:1.0.0
    container_name: aggregator-service
    environment:
      - WORKLOAD_TYPE=mdpnp
    network_mode: "host"

  mdpnp-service:
    build:
      context: ./services/mdpnp-service
      dockerfile: Dockerfile
    image: intel/hl-ai-mdpnp:1.0.0
    container_name: mdpnp-service
    network_mode: "host"

  dds-bridge:
    build:
      context: ./services/dds-bridge
      dockerfile: Dockerfile
    image: intel/hl-ai-dds-bridge:1.0.0
    container_name: dds-bridge
    environment:
      - GRPC_HOST=localhost
      - GRPC_PORT=50051
    depends_on:
      - mdpnp-service
      - aggregator-service
    network_mode: "host"


  3dpose-service:
      build:
        context: ./services/3d-pose-estimation
        dockerfile: src/Dockerfile
      image: intel/hl-ai-3dpose:1.0.0
      container_name: 3dpose-service
      network_mode: "host"


  # Placeholder entries for additional workloads that will send data to
  # aggregator-service (ai-ecg, rppg-web, 3d-pose-estimation, ui-frontend).
  # Their Dockerfiles and exact configs can be added once available.

  ai-ecg:
    build:
      context: ./services/ai-ecg/backend
      dockerfile: Dockerfile
    image: intel/hl-ai-ecg:1.0.0
    container_name: ai-ecg
    network_mode: "host"

  # rppg-web:
  #   build:
  #     context: ./services/rppg-web

  # pose3d:
  #   build:
  #     context: ./services/3d-pose-estimation

  # ui-frontend:
  #   build:
  #     context: ./services/ui-frontend
  #   ports:
  #     - "3000:3000"   # example UI port

# no custom networks when using host networking mode

